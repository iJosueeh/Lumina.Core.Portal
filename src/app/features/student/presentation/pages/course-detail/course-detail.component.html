<div class="min-h-screen bg-gray-50 dark:bg-dark-bg">
  <!-- Hero Header -->
  <div class="relative h-64 bg-gradient-to-r from-gray-900 to-gray-800 overflow-hidden">
    <img
      [src]="course.coverImage"
      alt="Course cover"
      class="absolute inset-0 w-full h-full object-cover opacity-30"
    />
    <div class="relative h-full flex items-end p-8">
      <div class="flex items-center gap-4 text-white">
        <button class="p-2 hover:bg-white/10 rounded-lg transition-colors">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
          </svg>
        </button>
        <div>
          <div class="flex items-center gap-2 mb-2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"
              />
            </svg>
            <span class="text-sm">{{ course.semester }}</span>
          </div>
          <h1 class="text-3xl font-bold mb-2">{{ course.title }}</h1>
          <div class="flex items-center gap-3">
            <img [src]="course.instructor.avatar" alt="Instructor" class="w-8 h-8 rounded-full" />
            <div class="text-sm">
              <p class="font-semibold">Prof. {{ course.instructor.name }}</p>
              <p class="text-gray-300">{{ course.instructor.title }}</p>
            </div>
            <button
              (click)="continueCurrentLesson()"
              class="ml-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition-colors"
            >
              Continuar Lecci√≥n
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <div class="border-b border-gray-200 dark:border-dark-border bg-white dark:bg-dark-card">
    <div class="px-8">
      <nav class="flex gap-8">
        <button
          *ngFor="let tab of tabs"
          (click)="setTab(tab.id)"
          [class.border-blue-600]="activeTab === tab.id"
          [class.text-blue-600]="activeTab === tab.id"
          [class.border-transparent]="activeTab !== tab.id"
          [class.text-gray-600]="activeTab !== tab.id"
          class="py-4 border-b-2 font-medium transition-colors dark:text-dark-text-secondary"
        >
          {{ tab.label }}
        </button>
      </nav>
    </div>
  </div>

  <!-- Content -->
  <div class="p-8 flex gap-6">
    <!-- Main Content -->
    <div class="flex-1">
      <!-- Content Tab -->
      <div *ngIf="activeTab === 'content'">
        <div
          class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
        >
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold text-gray-900 dark:text-dark-text">Plan de Estudios</h2>
            <div class="flex items-center gap-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-5 h-5 text-gray-400"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
                />
              </svg>
              <input
                type="text"
                placeholder="Filtrar lecciones..."
                class="px-3 py-1.5 border border-gray-300 dark:border-dark-border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-bg dark:text-dark-text"
              />
            </div>
          </div>

          <!-- Modules List -->
          <div class="space-y-4">
            <div
              *ngFor="let module of course.modules"
              class="border border-gray-200 dark:border-dark-border rounded-lg overflow-hidden"
            >
              <!-- Module Header -->
              <button
                (click)="toggleModule(module)"
                class="w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-dark-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <div
                    class="w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"
                  >
                    <span class="text-sm font-bold text-blue-600 dark:text-blue-400">{{
                      module.id.replace('m', '')
                    }}</span>
                  </div>
                  <div class="text-left">
                    <h3 class="font-semibold text-gray-900 dark:text-dark-text">
                      {{ module.title }}
                    </h3>
                    <p class="text-sm text-gray-500 dark:text-dark-text-secondary">
                      {{ module.lessons.length }} Lecciones ‚Ä¢ {{ module.duration }}
                    </p>
                  </div>
                </div>
                <svg
                  [class.rotate-180]="module.isExpanded"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-5 h-5 text-gray-400 transition-transform"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                  />
                </svg>
              </button>

              <!-- Lessons List -->
              <div
                *ngIf="module.isExpanded"
                class="border-t border-gray-200 dark:border-dark-border bg-gray-50 dark:bg-dark-bg"
              >
                <div
                  *ngFor="let lesson of module.lessons"
                  class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-dark-border last:border-0 hover:bg-white dark:hover:bg-dark-card transition-colors"
                  [class.opacity-50]="lesson.isLocked"
                >
                  <div class="flex items-center gap-3 flex-1">
                    <!-- Completion Checkbox -->
                    <div
                      class="w-5 h-5 rounded-full border-2 flex items-center justify-center"
                      [class.border-green-500]="lesson.isCompleted"
                      [class.bg-green-500]="lesson.isCompleted"
                      [class.border-gray-300]="!lesson.isCompleted"
                    >
                      <svg
                        *ngIf="lesson.isCompleted"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        class="w-3 h-3 text-white"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                          clip-rule="evenodd"
                        />
                      </svg>
                    </div>

                    <!-- Lesson Info -->
                    <div class="flex-1">
                      <div class="flex items-center gap-2">
                        <svg
                          *ngIf="lesson.type === 'video'"
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 20 20"
                          fill="currentColor"
                          class="w-4 h-4 text-gray-500"
                        >
                          <path
                            d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"
                          />
                        </svg>
                        <span class="font-medium text-gray-900 dark:text-dark-text">{{
                          lesson.title
                        }}</span>
                      </div>
                      <div class="flex items-center gap-2 mt-1">
                        <span class="text-xs text-gray-500 dark:text-dark-text-secondary"
                          >{{
                            lesson.type === 'video'
                              ? 'Video'
                              : lesson.type === 'reading'
                                ? 'Lectura'
                                : 'Quiz'
                          }}
                          ‚Ä¢ {{ lesson.duration }}</span
                        >
                        <span
                          *ngIf="lesson.isCompleted"
                          class="px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-semibold rounded"
                          >Completado</span
                        >
                      </div>
                    </div>
                  </div>

                  <!-- Action Button -->
                  <div class="ml-4">
                    <button
                      *ngIf="!lesson.isLocked"
                      (click)="startLesson(lesson)"
                      class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-semibold transition-colors"
                    >
                      {{ lesson.isCompleted ? 'Revisar' : 'Continuar' }}
                    </button>
                    <span
                      *ngIf="lesson.isLocked"
                      class="text-sm text-gray-500 dark:text-dark-text-secondary"
                    >
                      {{ lesson.availableIn || 'Bloqueado' }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Description Tab -->
      <div *ngIf="activeTab === 'description'">
        <div class="space-y-6">
          <!-- Descripci√≥n General -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <h2 class="text-2xl font-bold text-gray-900 dark:text-dark-text mb-4">
              Descripci√≥n del Curso
            </h2>
            <p class="text-gray-700 dark:text-dark-text-secondary leading-relaxed">
              {{ course.description }}
            </p>
          </div>

          <!-- Objetivos de Aprendizaje -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4">
              Objetivos de Aprendizaje
            </h3>
            <ul class="space-y-3">
              <li
                *ngFor="let objective of course.learningObjectives"
                class="flex items-start gap-3"
              >
                <svg
                  class="w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
                <span class="text-gray-700 dark:text-dark-text-secondary">{{ objective }}</span>
              </li>
            </ul>
          </div>

          <!-- Qu√© Aprender√°s -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4">Qu√© Aprender√°s</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div *ngFor="let item of course.whatYouWillLearn" class="flex items-start gap-2">
                <svg
                  class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                <span class="text-sm text-gray-700 dark:text-dark-text-secondary">{{ item }}</span>
              </div>
            </div>
          </div>

          <!-- Contenido del Curso -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4">
              Contenido del Curso
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <div class="text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                <svg
                  class="w-8 h-8 mx-auto text-blue-600 dark:text-blue-400 mb-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                  ></path>
                </svg>
                <div class="text-2xl font-bold text-gray-900 dark:text-dark-text">
                  {{ course.totalModules }}
                </div>
                <div class="text-sm text-gray-600 dark:text-dark-text-secondary">M√≥dulos</div>
              </div>
              <div class="text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg">
                <svg
                  class="w-8 h-8 mx-auto text-green-600 dark:text-green-400 mb-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
                <div class="text-2xl font-bold text-gray-900 dark:text-dark-text">
                  {{ course.totalLessons }}
                </div>
                <div class="text-sm text-gray-600 dark:text-dark-text-secondary">Lecciones</div>
              </div>
              <div class="text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
                <svg
                  class="w-8 h-8 mx-auto text-purple-600 dark:text-purple-400 mb-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
                <div class="text-2xl font-bold text-gray-900 dark:text-dark-text">
                  {{ course.totalDuration }}
                </div>
                <div class="text-sm text-gray-600 dark:text-dark-text-secondary">Duraci√≥n</div>
              </div>
              <div class="text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
                <svg
                  class="w-8 h-8 mx-auto text-orange-600 dark:text-orange-400 mb-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  ></path>
                </svg>
                <div class="text-2xl font-bold text-gray-900 dark:text-dark-text">
                  {{ course.resources.length }}
                </div>
                <div class="text-sm text-gray-600 dark:text-dark-text-secondary">Recursos</div>
              </div>
            </div>
            <div class="mt-4 pt-4 border-t border-gray-200 dark:border-dark-border">
              <h4 class="font-semibold text-gray-900 dark:text-dark-text mb-2">
                Recursos Incluidos:
              </h4>
              <ul class="grid grid-cols-1 md:grid-cols-2 gap-2">
                <li
                  *ngFor="let resource of course.resources"
                  class="flex items-center gap-2 text-sm text-gray-700 dark:text-dark-text-secondary"
                >
                  <svg
                    class="w-4 h-4 text-blue-600 dark:text-blue-400"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                  {{ resource }}
                </li>
              </ul>
            </div>
          </div>

          <!-- Instructor -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4">Instructor</h3>
            <div class="flex items-start gap-4 mb-4">
              <img
                [src]="course.instructor.avatar"
                alt="Instructor"
                class="w-20 h-20 rounded-full"
              />
              <div class="flex-1">
                <h4 class="text-lg font-bold text-gray-900 dark:text-dark-text">
                  {{ course.instructor.name }}
                </h4>
                <p class="text-sm text-gray-600 dark:text-dark-text-secondary mb-2">
                  {{ course.instructor.title }}
                </p>
                <div class="flex gap-2">
                  <a
                    *ngIf="course.instructor.socialLinks.linkedin"
                    [href]="course.instructor.socialLinks.linkedin"
                    target="_blank"
                    class="p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition"
                  >
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                      />
                    </svg>
                  </a>
                  <a
                    *ngIf="course.instructor.socialLinks.github"
                    [href]="course.instructor.socialLinks.github"
                    target="_blank"
                    class="p-2 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition"
                  >
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                      />
                    </svg>
                  </a>
                  <a
                    *ngIf="course.instructor.socialLinks.twitter"
                    [href]="course.instructor.socialLinks.twitter"
                    target="_blank"
                    class="p-2 bg-sky-100 dark:bg-sky-900/30 text-sky-600 dark:text-sky-400 rounded-lg hover:bg-sky-200 dark:hover:bg-sky-900/50 transition"
                  >
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
                      />
                    </svg>
                  </a>
                  <a
                    *ngIf="course.instructor.socialLinks.website"
                    [href]="course.instructor.socialLinks.website"
                    target="_blank"
                    class="p-2 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
                      ></path>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            <div class="space-y-3">
              <div>
                <h5 class="font-semibold text-gray-900 dark:text-dark-text mb-1">Biograf√≠a</h5>
                <p class="text-sm text-gray-700 dark:text-dark-text-secondary">
                  {{ course.instructor.bio }}
                </p>
              </div>
              <div>
                <h5 class="font-semibold text-gray-900 dark:text-dark-text mb-1">Experiencia</h5>
                <p class="text-sm text-gray-700 dark:text-dark-text-secondary">
                  {{ course.instructor.experience }}
                </p>
              </div>
              <div>
                <h5 class="font-semibold text-gray-900 dark:text-dark-text mb-1">Educaci√≥n</h5>
                <p class="text-sm text-gray-700 dark:text-dark-text-secondary">
                  {{ course.instructor.education }}
                </p>
              </div>
            </div>
          </div>

          <!-- Requisitos -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4">Requisitos</h3>
            <ul class="space-y-2">
              <li *ngFor="let requirement of course.requirements" class="flex items-start gap-2">
                <svg
                  class="w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                <span class="text-gray-700 dark:text-dark-text-secondary">{{ requirement }}</span>
              </li>
            </ul>
          </div>

          <!-- Informaci√≥n del Curso -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4">
              Informaci√≥n del Curso
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
                <div>
                  <div class="font-semibold text-gray-900 dark:text-dark-text">Fecha de Inicio</div>
                  <div class="text-sm text-gray-600 dark:text-dark-text-secondary">
                    {{ course.startDate | date: 'dd MMM yyyy' }}
                  </div>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
                <div>
                  <div class="font-semibold text-gray-900 dark:text-dark-text">Fecha de Fin</div>
                  <div class="text-sm text-gray-600 dark:text-dark-text-secondary">
                    {{ course.endDate | date: 'dd MMM yyyy' }}
                  </div>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-purple-600 dark:text-purple-400 flex-shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  ></path>
                </svg>
                <div>
                  <div class="font-semibold text-gray-900 dark:text-dark-text">Modalidad</div>
                  <div class="text-sm text-gray-600 dark:text-dark-text-secondary">
                    {{ course.modality }}
                  </div>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-green-600 dark:text-green-400 flex-shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
                <div>
                  <div class="font-semibold text-gray-900 dark:text-dark-text">Horario</div>
                  <div class="text-sm text-gray-600 dark:text-dark-text-secondary">
                    {{ course.schedule }}
                  </div>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-yellow-600 dark:text-yellow-400 flex-shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 14l9-5-9-5-9 5 9 5z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 14l9-5-9-5-9 5 9 5zm0 0v6"
                  ></path>
                </svg>
                <div>
                  <div class="font-semibold text-gray-900 dark:text-dark-text">Cr√©ditos</div>
                  <div class="text-sm text-gray-600 dark:text-dark-text-secondary">
                    {{ course.credits }} cr√©ditos acad√©micos
                  </div>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-indigo-600 dark:text-indigo-400 flex-shrink-0"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                  ></path>
                </svg>
                <div>
                  <div class="font-semibold text-gray-900 dark:text-dark-text">Nivel</div>
                  <div class="text-sm text-gray-600 dark:text-dark-text-secondary">
                    {{ course.level }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Materials Tab -->
      @if (activeTab === 'materials') {
        <div class="space-y-6">
          <!-- B√∫squeda y Filtros -->
          <div
            class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
          >
            <!-- Barra de b√∫squeda -->
            <div class="mb-4">
              <div class="relative">
                <svg
                  class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                  ></path>
                </svg>
                <input
                  type="text"
                  (input)="searchMaterials($any($event.target).value)"
                  placeholder="Buscar materiales..."
                  class="w-full pl-10 pr-4 py-2.5 border border-gray-300 dark:border-dark-border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-bg dark:text-dark-text"
                />
              </div>
            </div>

            <!-- Filtros por tipo -->
            <div class="flex gap-2 flex-wrap">
              <button
                (click)="filterByType('all')"
                [class.bg-blue-600]="activeFilter() === 'all'"
                [class.text-white]="activeFilter() === 'all'"
                [class.bg-gray-100]="activeFilter() !== 'all'"
                [class.dark:bg-gray-800]="activeFilter() !== 'all'"
                class="px-4 py-2 rounded-lg font-medium transition-colors dark:text-dark-text hover:bg-blue-700"
              >
                Todos ({{ course.materials.length }})
              </button>

              @for (type of materialTypes; track type) {
                <button
                  (click)="filterByType(type)"
                  [class.bg-blue-600]="activeFilter() === type"
                  [class.text-white]="activeFilter() === type"
                  [class.bg-gray-100]="activeFilter() !== type"
                  [class.dark:bg-gray-800]="activeFilter() !== type"
                  class="px-4 py-2 rounded-lg font-medium transition-colors dark:text-dark-text hover:bg-blue-700"
                >
                  {{ getMaterialTypeLabel(type) }} ({{ countByType(type) }})
                </button>
              }
            </div>

            <!-- Contador de resultados -->
            <div class="mt-4 text-sm text-gray-600 dark:text-dark-text-secondary">
              Mostrando {{ filteredMaterials().length }} de {{ course.materials.length }} materiales
            </div>
          </div>

          <!-- Lista de Materiales Agrupados -->
          @if (filteredMaterials().length > 0) {
            @for (group of groupedMaterials(); track group.moduleName) {
              <div
                class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
              >
                <h3
                  class="text-lg font-bold text-gray-900 dark:text-dark-text mb-4 flex items-center gap-2"
                >
                  <svg
                    class="w-6 h-6 text-blue-600 dark:text-blue-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                    ></path>
                  </svg>
                  {{ group.moduleName }}
                </h3>

                <div class="space-y-3">
                  @for (material of group.materials; track material.id) {
                    <div
                      class="border border-gray-200 dark:border-dark-border rounded-lg p-4 hover:border-blue-300 dark:hover:border-blue-700 transition-colors"
                    >
                      <div class="flex items-start gap-4">
                        <!-- Icon -->
                        <div
                          [class]="getMaterialColor(material.type)"
                          class="p-3 rounded-lg flex-shrink-0"
                        >
                          <svg
                            class="w-6 h-6"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path [attr.d]="getMaterialIcon(material.type)"></path>
                          </svg>
                        </div>

                        <!-- Info -->
                        <div class="flex-1 min-w-0">
                          <h4 class="font-semibold text-gray-900 dark:text-dark-text mb-1">
                            {{ material.title }}
                          </h4>

                          @if (material.description) {
                            <p class="text-sm text-gray-600 dark:text-dark-text-secondary mb-2">
                              {{ material.description }}
                            </p>
                          }

                          <div
                            class="flex items-center gap-3 text-sm text-gray-500 dark:text-dark-text-secondary flex-wrap"
                          >
                            <span class="font-medium">{{
                              getMaterialTypeLabel(material.type)
                            }}</span>

                            @if (material.fileSize) {
                              <span>‚Ä¢ {{ material.fileSize }}</span>
                            }

                            @if (material.duration) {
                              <span>‚Ä¢ {{ material.duration }}</span>
                            }

                            @if (material.isViewed) {
                              <span
                                class="inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-semibold"
                              >
                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                  <path
                                    fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd"
                                  ></path>
                                </svg>
                                Visto
                              </span>
                            }

                            @if (material.downloadCount) {
                              <span>‚Ä¢ {{ material.downloadCount }} descargas</span>
                            }
                          </div>
                        </div>

                        <!-- Actions -->
                        <div class="flex gap-2 flex-shrink-0">
                          @if (material.type === 'video' || material.type === 'pdf') {
                            <button
                              (click)="previewMaterial(material)"
                              class="px-3 py-2 border border-gray-300 dark:border-dark-border text-gray-700 dark:text-dark-text rounded-lg hover:bg-gray-50 dark:hover:bg-dark-bg transition-colors flex items-center gap-2"
                            >
                              <svg
                                class="w-4 h-4"
                                fill="none"
                                stroke="currentColor"
                                viewBox="0 0 24 24"
                              >
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  stroke-width="2"
                                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                                ></path>
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  stroke-width="2"
                                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                                ></path>
                              </svg>
                              <span class="hidden sm:inline">Preview</span>
                            </button>
                          }

                          <button
                            (click)="downloadMaterial(material)"
                            class="px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2"
                          >
                            <svg
                              class="w-4 h-4"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                              ></path>
                            </svg>
                            <span class="hidden sm:inline">Descargar</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  }
                </div>
              </div>
            }
          } @else {
            <!-- Empty State -->
            <div
              class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-12 text-center"
            >
              <svg
                class="w-16 h-16 mx-auto text-gray-400 mb-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-dark-text mb-2">
                No se encontraron materiales
              </h3>
              <p class="text-gray-600 dark:text-dark-text-secondary">
                Intenta ajustar los filtros o la b√∫squeda
              </p>
            </div>
          }
        </div>
      }

      <!-- Forum Tab -->
      @if (activeTab === 'forum') {
        <div class="space-y-6">
          <!-- Navegaci√≥n -->
          <div class="flex items-center justify-between mb-4">
            @if (selectedPost()) {
              <button
                (click)="backToPosts()"
                class="flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-dark-text hover:bg-gray-100 dark:hover:bg-dark-bg rounded-lg transition-colors"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 19l-7-7 7-7"
                  ></path>
                </svg>
                Volver a Posts
              </button>
            } @else if (selectedForum()) {
              <button
                (click)="backToForums()"
                class="flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-dark-text hover:bg-gray-100 dark:hover:bg-dark-bg rounded-lg transition-colors"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 19l-7-7 7-7"
                  ></path>
                </svg>
                Volver a Foros
              </button>
            } @else {
              <h2 class="text-2xl font-bold text-gray-900 dark:text-dark-text">Foros del Curso</h2>
            }
          </div>
          <!-- Vista: Lista de Foros -->
          @if (!selectedForum()) {
            <div class="space-y-4">
              @for (forum of course.forums; track forum.id) {
                <div
                  class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6 hover:border-blue-300 dark:hover:border-blue-700 transition-colors cursor-pointer"
                  (click)="selectForum(forum)"
                >
                  <div class="flex items-start justify-between">
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-2">
                        @if (forum.type === 'general') {
                          <span class="text-2xl">üì¢</span>
                        } @else {
                          <span class="text-2xl">üìö</span>
                        }
                        <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text">
                          {{ forum.title }}
                        </h3>
                      </div>
                      <p class="text-gray-600 dark:text-dark-text-secondary mb-3">
                        {{ forum.description }}
                      </p>
                      <div
                        class="flex items-center gap-4 text-sm text-gray-500 dark:text-dark-text-secondary"
                      >
                        <span class="flex items-center gap-1">
                          <svg
                            class="w-4 h-4"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"
                            ></path>
                          </svg>
                          {{ forum.postCount }} posts
                        </span>
                        <span>‚Ä¢</span>
                        <span>√öltima actividad: {{ getRelativeTime(forum.lastActivity) }}</span>
                      </div>
                    </div>
                    <svg
                      class="w-6 h-6 text-gray-400"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"
                      ></path>
                    </svg>
                  </div>
                </div>
              }
            </div>
          }
          <!-- Vista: Lista de Posts -->
          @if (selectedForum() && !selectedPost()) {
            <div class="space-y-4">
              <div
                class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4"
              >
                <h3 class="font-semibold text-blue-900 dark:text-blue-300">
                  {{ selectedForum()!.title }}
                </h3>
                <p class="text-sm text-blue-700 dark:text-blue-400">
                  {{ selectedForum()!.description }}
                </p>
              </div>
              @for (post of postsInSelectedForum(); track post.id) {
                <div
                  class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6 hover:border-blue-300 dark:hover:border-blue-700 transition-colors cursor-pointer"
                  (click)="selectPost(post)"
                >
                  <div class="flex items-start gap-4">
                    <img
                      [src]="post.author.avatar"
                      class="w-12 h-12 rounded-full flex-shrink-0"
                      [alt]="post.author.name"
                    />
                    <div class="flex-1 min-w-0">
                      <div class="flex items-start justify-between gap-4 mb-2">
                        <div class="flex-1">
                          <div class="flex items-center gap-2 flex-wrap mb-1">
                            @if (post.isPinned) {
                              <span
                                class="inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-semibold"
                              >
                                üìå Fijado
                              </span>
                            }
                            @if (post.isResolved) {
                              <span
                                class="inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-semibold"
                              >
                                ‚úì Resuelto
                              </span>
                            }
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-dark-text">
                              {{ post.title }}
                            </h3>
                          </div>
                          <div
                            class="flex items-center gap-2 text-sm text-gray-600 dark:text-dark-text-secondary"
                          >
                            <span class="font-medium">{{ post.author.name }}</span>
                            @if (post.author.role === 'instructor') {
                              <span
                                class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded text-xs font-semibold"
                              >
                                Instructor
                              </span>
                            }
                            <span>‚Ä¢</span>
                            <span>{{ getRelativeTime(post.createdAt) }}</span>
                          </div>
                        </div>
                      </div>
                      <p class="text-gray-700 dark:text-dark-text-secondary mb-3 line-clamp-2">
                        {{ post.content }}
                      </p>
                      <div class="flex items-center gap-4 text-sm">
                        <button
                          (click)="likePost(post); $event.stopPropagation()"
                          class="flex items-center gap-1 text-gray-600 dark:text-dark-text-secondary hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
                        >
                          <svg
                            class="w-5 h-5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"
                            ></path>
                          </svg>
                          <span class="font-medium">{{ post.likes }}</span>
                        </button>
                        <span
                          class="flex items-center gap-1 text-gray-600 dark:text-dark-text-secondary"
                        >
                          <svg
                            class="w-5 h-5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"
                            ></path>
                          </svg>
                          <span>{{ post.commentCount }} comentarios</span>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              }
            </div>
          }
          <!-- Vista: Detalle de Post con Comentarios -->
          @if (selectedPost()) {
            <div class="space-y-6">
              <!-- Post completo -->
              <div
                class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
              >
                <div class="flex items-start gap-4 mb-4">
                  <img
                    [src]="selectedPost()!.author.avatar"
                    class="w-14 h-14 rounded-full flex-shrink-0"
                    [alt]="selectedPost()!.author.name"
                  />
                  <div class="flex-1">
                    <div class="flex items-center gap-2 flex-wrap mb-2">
                      @if (selectedPost()!.isPinned) {
                        <span
                          class="inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-semibold"
                        >
                          üìå Fijado
                        </span>
                      }
                      @if (selectedPost()!.isResolved) {
                        <span
                          class="inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-semibold"
                        >
                          ‚úì Resuelto
                        </span>
                      }
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-dark-text mb-2">
                      {{ selectedPost()!.title }}
                    </h2>
                    <div
                      class="flex items-center gap-2 text-sm text-gray-600 dark:text-dark-text-secondary mb-4"
                    >
                      <span class="font-medium">{{ selectedPost()!.author.name }}</span>
                      @if (selectedPost()!.author.role === 'instructor') {
                        <span
                          class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded text-xs font-semibold"
                        >
                          Instructor
                        </span>
                      }
                      <span>‚Ä¢</span>
                      <span>{{ getRelativeTime(selectedPost()!.createdAt) }}</span>
                    </div>
                    <p class="text-gray-700 dark:text-dark-text leading-relaxed">
                      {{ selectedPost()!.content }}
                    </p>
                  </div>
                </div>
                <div
                  class="flex items-center gap-4 pt-4 border-t border-gray-200 dark:border-dark-border"
                >
                  <button
                    (click)="likePost(selectedPost()!)"
                    class="flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-dark-text hover:bg-gray-100 dark:hover:bg-dark-bg rounded-lg transition-colors"
                  >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"
                      ></path>
                    </svg>
                    <span class="font-medium">{{ selectedPost()!.likes }} Me gusta</span>
                  </button>
                </div>
              </div>
              <!-- Comentarios -->
              <div
                class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
              >
                <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4">
                  Comentarios ({{ selectedPost()!.commentCount }})
                </h3>
                <div class="space-y-4">
                  @for (comment of commentsInSelectedPost(); track comment.id) {
                    <div class="border-l-2 border-gray-200 dark:border-dark-border pl-4">
                      <div class="flex items-start gap-3">
                        <img
                          [src]="comment.author.avatar"
                          class="w-10 h-10 rounded-full flex-shrink-0"
                          [alt]="comment.author.name"
                        />
                        <div class="flex-1">
                          <div class="flex items-center gap-2 mb-1">
                            <span class="font-semibold text-gray-900 dark:text-dark-text">{{
                              comment.author.name
                            }}</span>
                            @if (comment.author.role === 'instructor') {
                              <span
                                class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded text-xs font-semibold"
                              >
                                Instructor
                              </span>
                            }
                            <span class="text-sm text-gray-500 dark:text-dark-text-secondary">{{
                              getRelativeTime(comment.createdAt)
                            }}</span>
                          </div>
                          <p class="text-gray-700 dark:text-dark-text mb-2">
                            {{ comment.content }}
                          </p>
                          <button
                            (click)="likeComment(comment)"
                            class="text-sm text-gray-600 dark:text-dark-text-secondary hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
                          >
                            üëç {{ comment.likes }}
                          </button>
                          <!-- Respuestas anidadas -->
                          @if (comment.replies.length > 0) {
                            <div class="mt-3 ml-6 space-y-3">
                              @for (reply of comment.replies; track reply.id) {
                                <div class="border-l-2 border-blue-200 dark:border-blue-800 pl-4">
                                  <div class="flex items-start gap-3">
                                    <img
                                      [src]="reply.author.avatar"
                                      class="w-8 h-8 rounded-full flex-shrink-0"
                                      [alt]="reply.author.name"
                                    />
                                    <div class="flex-1">
                                      <div class="flex items-center gap-2 mb-1">
                                        <span
                                          class="font-semibold text-sm text-gray-900 dark:text-dark-text"
                                          >{{ reply.author.name }}</span
                                        >
                                        @if (reply.author.role === 'instructor') {
                                          <span
                                            class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded text-xs font-semibold"
                                          >
                                            Instructor
                                          </span>
                                        }
                                        <span
                                          class="text-xs text-gray-500 dark:text-dark-text-secondary"
                                          >{{ getRelativeTime(reply.createdAt) }}</span
                                        >
                                      </div>
                                      <p class="text-sm text-gray-700 dark:text-dark-text mb-1">
                                        {{ reply.content }}
                                      </p>
                                      <button
                                        (click)="likeComment(reply)"
                                        class="text-xs text-gray-600 dark:text-dark-text-secondary hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
                                      >
                                        üëç {{ reply.likes }}
                                      </button>
                                    </div>
                                  </div>
                                </div>
                              }
                            </div>
                          }
                        </div>
                      </div>
                    </div>
                  }
                </div>
              </div>
            </div>
          }
        </div>
      }

      <!-- Announcements Tab -->
      @if (activeTab === 'announcements') {
        <div class="space-y-6">
          <!-- B√∫squeda y Filtros -->
          <div class="flex gap-4 flex-wrap items-center">
            <!-- B√∫squeda -->
            <div class="flex-1 min-w-[250px]">
              <div class="relative">
                <svg
                  class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                  ></path>
                </svg>
                <input
                  type="text"
                  (input)="searchAnnouncements($any($event.target).value)"
                  placeholder="Buscar anuncios..."
                  class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-border rounded-lg bg-white dark:bg-dark-bg text-gray-900 dark:text-dark-text focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>
            </div>
            <!-- Filtros de Prioridad -->
            <div class="flex gap-2 flex-wrap">
              <button
                (click)="filterAnnouncementsByPriority('all')"
                [class.bg-blue-600]="announcementPriorityFilter() === 'all'"
                [class.text-white]="announcementPriorityFilter() === 'all'"
                [class.bg-gray-100]="announcementPriorityFilter() !== 'all'"
                [class.dark:bg-dark-bg]="announcementPriorityFilter() !== 'all'"
                class="px-4 py-2 rounded-lg font-medium transition-colors hover:bg-blue-500 hover:text-white"
              >
                Todos
              </button>
              <button
                (click)="filterAnnouncementsByPriority('high')"
                [class.bg-red-600]="announcementPriorityFilter() === 'high'"
                [class.text-white]="announcementPriorityFilter() === 'high'"
                [class.bg-gray-100]="announcementPriorityFilter() !== 'high'"
                [class.dark:bg-dark-bg]="announcementPriorityFilter() !== 'high'"
                class="px-4 py-2 rounded-lg font-medium transition-colors hover:bg-red-500 hover:text-white"
              >
                Alta
              </button>
              <button
                (click)="filterAnnouncementsByPriority('medium')"
                [class.bg-yellow-600]="announcementPriorityFilter() === 'medium'"
                [class.text-white]="announcementPriorityFilter() === 'medium'"
                [class.bg-gray-100]="announcementPriorityFilter() !== 'medium'"
                [class.dark:bg-dark-bg]="announcementPriorityFilter() !== 'medium'"
                class="px-4 py-2 rounded-lg font-medium transition-colors hover:bg-yellow-500 hover:text-white"
              >
                Media
              </button>
              <button
                (click)="filterAnnouncementsByPriority('low')"
                [class.bg-green-600]="announcementPriorityFilter() === 'low'"
                [class.text-white]="announcementPriorityFilter() === 'low'"
                [class.bg-gray-100]="announcementPriorityFilter() !== 'low'"
                [class.dark:bg-dark-bg]="announcementPriorityFilter() !== 'low'"
                class="px-4 py-2 rounded-lg font-medium transition-colors hover:bg-green-500 hover:text-white"
              >
                Baja
              </button>
            </div>
          </div>
          <!-- Lista de Anuncios -->
          @if (filteredAnnouncements().length > 0) {
            <div class="space-y-4">
              @for (announcement of filteredAnnouncements(); track announcement.id) {
                <div
                  class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6 hover:shadow-lg transition-shadow"
                >
                  <!-- Header con badges -->
                  <div class="flex items-start justify-between mb-3">
                    <div class="flex items-center gap-2 flex-wrap">
                      @if (announcement.isPinned) {
                        <span
                          class="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-semibold"
                        >
                          üìå Fijado
                        </span>
                      }
                      <span
                        [class]="getPriorityBadgeClass(announcement.priority)"
                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold"
                      >
                        {{ getPriorityLabel(announcement.priority) }}
                      </span>
                    </div>
                  </div>
                  <!-- T√≠tulo -->
                  <h3 class="text-xl font-bold text-gray-900 dark:text-dark-text mb-3">
                    {{ announcement.title }}
                  </h3>
                  <!-- Autor y Fecha -->
                  <div class="flex items-center gap-3 mb-4">
                    <img
                      [src]="announcement.author.avatar"
                      class="w-10 h-10 rounded-full"
                      [alt]="announcement.author.name"
                    />
                    <div>
                      <div class="flex items-center gap-2">
                        <span class="font-medium text-gray-900 dark:text-dark-text">{{
                          announcement.author.name
                        }}</span>
                        <span
                          class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded text-xs font-semibold"
                        >
                          Instructor
                        </span>
                      </div>
                      <span class="text-sm text-gray-500 dark:text-dark-text-secondary">{{
                        getRelativeTime(announcement.createdAt)
                      }}</span>
                    </div>
                  </div>
                  <!-- Contenido -->
                  <p class="text-gray-700 dark:text-dark-text leading-relaxed mb-4">
                    {{ announcement.content }}
                  </p>
                  <!-- Adjuntos -->
                  @if (announcement.attachments && announcement.attachments.length > 0) {
                    <div class="mb-4">
                      <h4
                        class="font-semibold text-gray-900 dark:text-dark-text mb-2 flex items-center gap-2"
                      >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"
                          ></path>
                        </svg>
                        Adjuntos
                      </h4>
                      <div class="space-y-2">
                        @for (attachment of announcement.attachments; track attachment.id) {
                          <button
                            (click)="downloadAttachment(attachment)"
                            class="flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-dark-bg rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors w-full text-left"
                          >
                            <svg
                              class="w-6 h-6 text-gray-600 dark:text-gray-400 flex-shrink-0"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                [attr.d]="getAttachmentIcon(attachment.type)"
                              ></path>
                            </svg>
                            <div class="flex-1 min-w-0">
                              <p class="font-medium text-gray-900 dark:text-dark-text truncate">
                                {{ attachment.name }}
                              </p>
                              @if (attachment.size) {
                                <p class="text-sm text-gray-500 dark:text-dark-text-secondary">
                                  {{ attachment.size }}
                                </p>
                              }
                            </div>
                            <svg
                              class="w-5 h-5 text-gray-400 flex-shrink-0"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                              ></path>
                            </svg>
                          </button>
                        }
                      </div>
                    </div>
                  }
                  <!-- Likes -->
                  <div
                    class="flex items-center gap-4 pt-4 border-t border-gray-200 dark:border-dark-border"
                  >
                    <button
                      (click)="likeAnnouncement(announcement)"
                      [class.text-blue-600]="announcement.isLiked"
                      [class.dark:text-blue-400]="announcement.isLiked"
                      [class.text-gray-600]="!announcement.isLiked"
                      [class.dark:text-dark-text-secondary]="!announcement.isLiked"
                      class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-bg transition-colors font-medium"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"
                        ></path>
                      </svg>
                      <span>{{ announcement.likes }} Me gusta</span>
                    </button>
                  </div>
                </div>
              }
            </div>
          } @else {
            <!-- Empty State -->
            <div
              class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-12 text-center"
            >
              <svg
                class="w-16 h-16 mx-auto text-gray-400 mb-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"
                ></path>
              </svg>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-dark-text mb-2">
                No se encontraron anuncios
              </h3>
              <p class="text-gray-600 dark:text-dark-text-secondary">
                Intenta ajustar los filtros o la b√∫squeda
              </p>
            </div>
          }
        </div>
      }

      <!-- Grades Tab -->
      @if (activeTab === 'grades') {
        <div class="space-y-6">
          @if (course.grades) {
            <!-- Resumen del Curso -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <!-- Promedio -->
              <div
                class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
              >
                <h3 class="text-sm font-medium text-gray-600 dark:text-dark-text-secondary mb-2">
                  Promedio del Curso
                </h3>
                <p [class]="getPromedioColor(course.grades.promedio)" class="text-4xl mb-2">
                  {{ course.grades.promedio }}
                </p>
                <p class="text-xs text-gray-500 dark:text-dark-text-secondary">
                  Promedio clase: {{ course.grades.promedioClase }}
                </p>
              </div>
              <!-- Avance -->
              <div
                class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
              >
                <h3 class="text-sm font-medium text-gray-600 dark:text-dark-text-secondary mb-2">
                  Avance del Curso
                </h3>
                <p class="text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2">
                  {{ course.grades.avance }}%
                </p>
                <p class="text-xs text-gray-500 dark:text-dark-text-secondary">
                  {{ course.grades.creditos }} cr√©ditos
                </p>
              </div>
              <!-- Ranking -->
              <div
                class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
              >
                <h3 class="text-sm font-medium text-gray-600 dark:text-dark-text-secondary mb-2">
                  Ranking en Clase
                </h3>
                <p class="text-4xl font-bold text-purple-600 dark:text-purple-400 mb-2">
                  {{ course.grades.posicionamiento }}/{{ course.grades.totalEstudiantes }}
                </p>
                <p class="text-xs text-gray-500 dark:text-dark-text-secondary">
                  Posici√≥n en el curso
                </p>
              </div>
            </div>
            <!-- Evaluaciones -->
            <div
              class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
            >
              <h3
                class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4 flex items-center gap-2"
              >
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  ></path>
                </svg>
                Evaluaciones
              </h3>
              <div class="space-y-3">
                @for (evaluacion of course.grades.evaluaciones; track evaluacion.actividad) {
                  <div
                    class="border border-gray-200 dark:border-dark-border rounded-lg p-4 hover:shadow-md transition-shadow"
                  >
                    <div class="flex items-start justify-between gap-4">
                      <div class="flex-1">
                        <h4 class="font-semibold text-gray-900 dark:text-dark-text mb-2">
                          {{ evaluacion.actividad }}
                        </h4>
                        <div class="flex items-center gap-4 text-sm">
                          <span class="text-gray-600 dark:text-dark-text-secondary">
                            Peso: <span class="font-semibold">{{ evaluacion.peso }}%</span>
                          </span>
                          <span [class]="getPromedioColor(evaluacion.nota)">
                            Nota: {{ getNotaDisplay(evaluacion.nota, evaluacion.estado) }}
                          </span>
                        </div>
                      </div>
                      <span
                        [class]="getEstadoBadge(evaluacion.estado)"
                        class="px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap"
                      >
                        {{ evaluacion.estado }}
                      </span>
                    </div>
                  </div>
                }
              </div>
            </div>
            <!-- Gr√°fico de Progreso -->
            <div
              class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
            >
              <h3
                class="text-xl font-bold text-gray-900 dark:text-dark-text mb-4 flex items-center gap-2"
              >
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                  ></path>
                </svg>
                Progreso del Curso
              </h3>
              <div
                class="relative w-full h-10 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"
              >
                <div
                  [style.width.%]="course.grades.avance"
                  class="h-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-end pr-4 transition-all duration-500"
                >
                  <span class="text-white font-bold text-sm">{{ course.grades.avance }}%</span>
                </div>
              </div>
              <p class="text-center mt-3 text-sm text-gray-600 dark:text-dark-text-secondary">
                Has completado {{ course.grades.avance }}% del curso
              </p>
            </div>
          } @else {
            <!-- Empty State -->
            <div
              class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-12 text-center"
            >
              <svg
                class="w-16 h-16 mx-auto text-gray-400 mb-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>
              <h3 class="text-xl font-semibold text-gray-900 dark:text-dark-text mb-2">
                No hay calificaciones disponibles
              </h3>
              <p class="text-gray-600 dark:text-dark-text-secondary">
                Las calificaciones se mostrar√°n una vez que el instructor las publique
              </p>
            </div>
          }
        </div>
      }

      <!-- Other Tabs (Placeholder) -->
      <div
        *ngIf="
          activeTab !== 'content' &&
          activeTab !== 'description' &&
          activeTab !== 'materials' &&
          activeTab !== 'forum' &&
          activeTab !== 'announcements' &&
          activeTab !== 'grades'
        "
        class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-8 text-center"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-16 h-16 mx-auto text-gray-400 mb-4"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"
          />
        </svg>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-dark-text mb-2">
          Secci√≥n en desarrollo
        </h3>
        <p class="text-gray-600 dark:text-dark-text-secondary">
          Esta funcionalidad estar√° disponible pr√≥ximamente
        </p>
      </div>
    </div>

    <!-- Sidebar -->
    <aside class="w-80 space-y-6">
      <!-- Progress Card -->
      <div
        class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
      >
        <h3 class="font-bold text-gray-900 dark:text-dark-text mb-4">Progreso General</h3>
        <div class="text-center mb-4">
          <div class="text-4xl font-bold text-blue-600 dark:text-blue-400">
            {{ course.progress }}%
          </div>
          <p class="text-sm text-gray-600 dark:text-dark-text-secondary mt-1">
            Has completado {{ course.completedModules }} de {{ course.totalModules }} m√≥dulos.
            ¬°Sigue as√≠!
          </p>
        </div>
        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
          <div
            class="bg-blue-600 h-3 rounded-full transition-all"
            [style.width.%]="course.progress"
          ></div>
        </div>
      </div>

      <!-- Instructor Card -->
      <div
        class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
      >
        <h3 class="font-bold text-gray-900 dark:text-dark-text mb-4">Instructor</h3>
        <div class="flex items-start gap-3 mb-4">
          <img [src]="course.instructor.avatar" alt="Instructor" class="w-12 h-12 rounded-full" />
          <div class="flex-1">
            <h4 class="font-semibold text-gray-900 dark:text-dark-text">
              {{ course.instructor.name }}
            </h4>
            <p class="text-sm text-gray-600 dark:text-dark-text-secondary">
              {{ course.instructor.title }}
            </p>
          </div>
        </div>
        <button
          class="w-full px-4 py-2 border border-blue-600 text-blue-600 dark:text-blue-400 dark:border-blue-400 rounded-lg font-semibold hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors"
        >
          Contactar
        </button>
      </div>

      <!-- Upcoming Assignments -->
      <div
        class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
      >
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-bold text-gray-900 dark:text-dark-text">Pr√≥ximas Entregas</h3>
          <a href="#" class="text-sm text-blue-600 dark:text-blue-400 hover:underline">Ver todo</a>
        </div>
        <div class="space-y-3">
          <div
            *ngFor="let assignment of upcomingAssignments"
            class="p-3 bg-gray-50 dark:bg-dark-bg rounded-lg"
          >
            <div class="flex gap-3">
              <div class="text-center">
                <div class="text-xs font-semibold text-gray-500 dark:text-dark-text-secondary">
                  {{ assignment.mes }}
                </div>
                <div class="text-xl font-bold text-gray-900 dark:text-dark-text">
                  {{ assignment.dia }}
                </div>
              </div>
              <div class="flex-1 min-w-0">
                <h4 class="font-semibold text-sm text-gray-900 dark:text-dark-text">
                  {{ assignment.titulo }}
                </h4>
                <p class="text-xs text-gray-600 dark:text-dark-text-secondary mt-1">Pendiente</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Resources -->
      <div
        class="bg-white dark:bg-dark-card rounded-xl border border-gray-200 dark:border-dark-border p-6"
      >
        <h3 class="font-bold text-gray-900 dark:text-dark-text mb-4">Recursos R√°pidos</h3>
        <div class="space-y-2">
          <button
            class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-dark-bg rounded-lg transition-colors text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 text-gray-600 dark:text-dark-text-secondary"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"
              />
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-dark-text"
              >Archivos del curso</span
            >
          </button>
          <button
            class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-dark-bg rounded-lg transition-colors text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 text-gray-600 dark:text-dark-text-secondary"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"
              />
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-dark-text"
              >Foro de discusi√≥n</span
            >
          </button>
          <button
            class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-dark-bg rounded-lg transition-colors text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5 text-gray-600 dark:text-dark-text-secondary"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"
              />
            </svg>
            <span class="text-sm font-medium text-gray-700 dark:text-dark-text"
              >Centro de Ayuda</span
            >
          </button>
        </div>
      </div>
    </aside>
  </div>
</div>
